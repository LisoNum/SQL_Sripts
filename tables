DROP TABLE ITEM CASCADE CONSTRAINTS;
DROP TABLE Effekt;
DROP TABLE Team CASCADE CONSTRAINTS;
DROP TABLE Champion CASCADE CONSTRAINTS;
DROP TABLE Faehigkeit CASCADE CONSTRAINTS;
DROP TABLE Faehigkeit_Effekt;
DROP TABLE Skins;
DROP TABLE Spielmodus CASCADE CONSTRAINTS;
DROP TABLE Arena;
DROP TABLE Klassisch;
DROP TABLE Kauft;
 
CREATE TABLE Item ( 
    Name VARCHAR(50) NOT NULL, 
    Seltenheit VARCHAR(30), 
    Preis INT CHECK (Preis >= 0), 
    PRIMARY KEY (Name) 
); 

CREATE TABLE Effekt (  
    Effekt_ID INT NOT NULL,
    Schaden INT CHECK (Schaden >= 0), 
    Verteidigung INT CHECK (Verteidigung >= 0), 
    Item_Name VARCHAR(50),
    PRIMARY KEY (Effekt_ID, Item_Name),
    FOREIGN KEY (Item_Name) REFERENCES ITEM(Name)
); 

CREATE TABLE Spielmodus ( 
    Spiel_ID INT NOT NULL, 
    Gewinner VARCHAR(50), 
    Dauer INT CHECK (Dauer > 0), 
    PRIMARY KEY (Spiel_ID) 
); 
 
CREATE TABLE Klassisch ( 
    Spiel_ID INT NOT NULL, 
    Turmanzahl INT CHECK (Turmanzahl >= 0), 
    Bosskills INT CHECK (Bosskills >= 0), 
    PRIMARY KEY (Spiel_ID), 
    FOREIGN KEY (Spiel_ID) REFERENCES Spielmodus(Spiel_ID)  
); 

CREATE TABLE Arena ( 
    Spiel_ID INT NOT NULL, 
    Runden INT CHECK (Runden > 0), 
    PRIMARY KEY (Spiel_ID), 
    FOREIGN KEY (Spiel_ID) REFERENCES Spielmodus(Spiel_ID) 
);
 
 
CREATE TABLE Team ( 
    Team_ID INT NOT NULL, 
    Spieleranzahl INT CHECK (Spieleranzahl > 0), 
    Farbe VARCHAR(30), 
    Spiel_ID INT,
    PRIMARY KEY (Team_ID), 
    FOREIGN KEY (Spiel_ID) REFERENCES Spielmodus(Spiel_ID)

); 

CREATE TABLE Champion ( 
    Name VARCHAR(50) NOT NULL, 
    Position VARCHAR(30) NOT NULL, 
    Geschlecht VARCHAR(20), 
    Reichweite VARCHAR(20), 
    Region VARCHAR(50), 
    Jahr_Ver INT CHECK (Jahr_Ver >= 2000), 
    Ressource VARCHAR(30), 
    Gattung VARCHAR(30), 
    Team_ID INT,
    PRIMARY KEY (Name), 
    FOREIGN KEY (Team_ID) REFERENCES Team(Team_ID) 
); 
 
CREATE TABLE Faehigkeit ( 
    Name VARCHAR(50) NOT NULL,  
    Belegung VARCHAR(20), 
    Handlungsrichtung VARCHAR(20), 
    Champion_Name VARCHAR(50),
    PRIMARY KEY (Name), 
    FOREIGN KEY (Champion_Name) REFERENCES Champion(Name) 
); 

CREATE TABLE Faehigkeit_Effekt (  
    FaehigkeitEff_ID INT NOT NULL, 
    Faehigkeit_Name VARCHAR(50), 
    Schaden INT CHECK (Schaden >= 0), 
    Buff VARCHAR(50), 
    PRIMARY KEY (FaehigkeitEff_ID, Faehigkeit_Name), 
    FOREIGN KEY (Faehigkeit_Name) REFERENCES Faehigkeit(Name)
); 

CREATE TABLE Skins (
    Name VARCHAR(50) NOT NULL, 
    Jahr_Er INT CHECK (Jahr_Er >= 2009), 
    Reihe VARCHAR(50), 
    Preis DECIMAL(8) CHECK (Preis >= 0), 
    Champion_Name VARCHAR(50),
    PRIMARY KEY (Name), 
    FOREIGN KEY (Champion_Name) REFERENCES Champion(Name) 
); 
 
CREATE TABLE Kauft (
    Item_Name VARCHAR(50),
    Champion_Name VARCHAR(50),
    Art VARCHAR(50),
    Verkaufspreis INT,
    PRIMARY KEY (Item_Name, Champion_Name, Art),
    FOREIGN KEY (Item_Name) REFERENCES Item(Name),
    FOREIGN KEY (Champion_Name) REFERENCES Champion(Name)
 );

COMMIT;